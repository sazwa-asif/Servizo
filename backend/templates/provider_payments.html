{% extends "base.html" %}
{% block content %}


<div class="container-fluid my-5">
  
  <div class="row justify-content-center">
    <div class="col-12 col-lg-10">
      <div class="card shadow-lg border-0 rounded-4" style="background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);">
        <div class="card-header text-center py-4" style="background: linear-gradient(135deg, #0a4c68 0%, #0d5a7a 100%); color: white; border: none; border-radius: 16px 16px 0 0;">
          <h2 class="fw-bold mb-0"><i class="bi bi-cash-coin me-2"></i>My Payments</h2>
          <p class="mb-0 mt-1 opacity-75">Track your payout history and status</p>
        </div>

        <div class="card-body p-4">
          {% if payments %}
          <div class="row g-4">
            {% for p in payments %}
            <div class="col-12 col-md-6 col-lg-4">
              <div class="card h-100 border-0 shadow-sm rounded-3" style="background: white; transition: all 0.3s ease; border-left: 4px solid #0a4c68;">
                <div class="card-body p-4">
                  <div class="d-flex justify-content-between align-items-start mb-3">
                    <div>
                      <h6 class="text-muted mb-1" style="font-size: 0.85rem;">Payment ID</h6>
                      <span class="fw-bold text-primary" style="color: #0a4c68;">#{{ p.PaymentID }}</span>
                    </div>
                    <div class="text-end">
                      {% if p.PaymentStatus == 'Paid' %}
                        <span class="badge bg-success rounded-pill px-3 py-2"><i class="bi bi-check-circle-fill me-1"></i>Paid</span>
                      {% elif p.PaymentStatus == 'Refunded' %}
                        <span class="badge bg-danger rounded-pill px-3 py-2">Refunded</span>
                      {% elif p.PaymentStatus == 'Pending' %}
                        <span class="badge bg-warning rounded-pill px-3 py-2">Pending</span>
                      {% else %}
                        <span class="badge bg-secondary rounded-pill px-3 py-2">N/A</span>
                      {% endif %}
                    </div>
                  </div>
                  <div class="mb-3">
                    <h6 class="text-muted mb-1" style="font-size: 0.85rem;"><i class="bi bi-envelope me-1"></i>Customer</h6>
                    <p class="mb-0 fw-semibold" style="color: #0a4c68;">{{ p.CustomerEmail }}</p>
                  </div>
                  <div class="mb-3">
                    <h6 class="text-muted mb-1" style="font-size: 0.85rem;"><i class="bi bi-calendar me-1"></i>Date</h6>
                    <p class="mb-0 fw-semibold" style="color: #0a4c68;">{{ p.BookingDateFormatted }}</p>
                  </div>
                  <div>
                    <h6 class="text-muted mb-1" style="font-size: 0.85rem;"><i class="bi bi-cash-coin me-1"></i>Amount</h6>
                    <p class="mb-0 fw-bold fs-5" style="color: #0a4c68;">{{ p.AmountFormatted }}</p>
                  </div>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
          {% else %}
          <div class="text-center py-5">
            <div class="mb-4">
              <i class="bi bi-cash-coin display-1 text-muted"></i>
            </div>
            <h4 class="text-muted mb-3">No Payments Yet</h4>
            <p class="text-muted">Your payment history will appear here once you complete jobs.</p>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(10, 76, 104, 0.2) !important;
  }

  .badge {
    font-size: 0.75rem;
    font-weight: 600;
  }

  @media (max-width: 768px) {
    .col-12.col-md-6.col-lg-4 {
      margin-bottom: 1rem;
    }
  }
</style>
{% endblock %}
